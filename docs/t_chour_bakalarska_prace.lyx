#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass article
\begin_preamble
\usepackage{xcolor}
\end_preamble
\use_default_options false
\maintain_unincluded_children false
\language czech
\language_package default
\inputencoding utf8
\fontencoding global
\font_roman "times" "default"
\font_sans "helvet" "default"
\font_typewriter "courier" "default"
\font_math "auto" "auto"
\font_default_family rmdefault
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 95 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures false
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 11
\spacing other 1.2
\use_hyperref false
\papersize a4paper
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 25mm
\topmargin 25mm
\rightmargin 25mm
\bottommargin 15mm
\secnumdepth 3
\tocdepth 3
\paragraph_separation skip
\defskip bigskip
\is_math_indent 0
\math_numbering_side default
\quotes_style german
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard
\noindent
\align center

\family sans
\size giant
Vysoká škola ekonomická v Praze
\begin_inset Newline newline
\end_inset

Fakulta informatiky a statistiky
\end_layout

\begin_layout Standard
\align center

\family sans
\size giant
\lang english
\begin_inset Graphics
	filename ../../../Downloads/Sablona-BP-DP-FIS/SablonaBP-DP/img/logo-FIS.pdf
	width 30text%

\end_inset


\end_layout

\begin_layout Standard
\align center

\family sans
\series bold
\size giant
Analýza a implementace Salesforce CRM s integrací na účetní systém pro střední
 firmu nebo neziskovou organizaci
\end_layout

\begin_layout Standard
\align center

\family sans
\series bold
\size giant
\lang english
\begin_inset VSpace 8mm
\end_inset


\series default
\lang czech
Bakalářská Práce
\end_layout

\begin_layout Standard
\align center

\family sans
\series medium
\size giant
\lang english
\begin_inset VSpace 8mm
\end_inset

 
\size large

\begin_inset Tabular
<lyxtabular version="3" rows="2" columns="2">
<features tabularvalignment="middle">
<column alignment="right" valignment="top">
<column alignment="left" valignment="top">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family sans
\series medium
\size large
\lang english
Studijní program:
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Aplikovaná Informatika
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family sans
\series medium
\size large
\lang english
\begin_inset VSpace 2mm
\end_inset

Studijní obor:
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Aplikovaná informatika 
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center

\family sans
\series medium
\size large
\lang english
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{
\backslash
stretch{8}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\align center

\family sans
\series medium
\size large
\lang english
\begin_inset Tabular
<lyxtabular version="3" rows="2" columns="2">
<features tabularvalignment="middle">
<column alignment="right" valignment="top">
<column alignment="left" valignment="top">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family sans
\series medium
\size large
\lang english
Autor:
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Tomáš Chour
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family sans
\series medium
\size large
\lang english
\begin_inset VSpace 2mm
\end_inset

Vedoucí práce:
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
prof.
 Ing.
 Alena Buchalcevová, Ph.D.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center

\family sans
\series medium
\size large
\lang english
\begin_inset VSpace 8mm
\end_inset

 Praha, Duben 2021 
\end_layout

\begin_layout Standard

\lang english
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
subsection*{Abstrakt} 
\backslash
label{sec:Abstrakt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
subsection*{Klíčová slova} 
\backslash
label{sec:Klíčová slova}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Salesforce integrace dat, ABRA Flexibee integrace dat, Salesforce synchronizace
 dat, Abra Flexibee synchronizace dat
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
subsection*{Abstract} 
\backslash
label{sec:Abstract}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
subsection*{Keywords} 
\backslash
label{sec:Keywords}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Salesforce data integration, ABRA Flexibee data integration, Salesforce
 data synchronization, Abra Flexibee data syncrhonization
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tableofcontents 
\backslash
addtocontents{toc}{~
\backslash
hfill
\backslash
textbf{Strana}
\backslash
par}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FloatList table

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
subsection*{Seznam zkratek} 
\backslash
label{sec:Seznam zkratek}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
section*{Úvod} 
\backslash
label{sec:uvod} 
\backslash
addcontentsline{toc}{section}{
\backslash
nameref{sec:uvod}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
V posledních letech v České republice výrazně narůstá počet implementací
 CRM cloudových služeb (ČSÚ, 2016), (ČSÚ, 2019), (ČSÚ, 2021).
 Největším cloudovým CRM řešením na světě je Salesforce CRM od Salesforce.com
 s podílem na trhu 19,5% (Gartner, 2019).
 Jednou velkou kapitolou během vývojové fáze implementace je integrace na
 ostatní systémy, které daná firma pro svou činnost a provoz používá.
 Integrace s ostatními systémy bývá naročná na analýzu i vývoj, protože
 musí běžet bezchybně, zvládat výkyvy v objemu dat i dočasné výpadky jednoho
 nebo obou systémů a zajistit bezpečnost přenosu.
 Jedna z nejčastějších integrací bývá na účetní systém.
\end_layout

\begin_layout Standard
Další obsáhlou fází implementace je samotné nasazení celého systému nebo
 jeho části.
 Běžně dostupné komponenty systému by měly být snadno nasaditelné ideálně
 pomocí jedné akce, případně přesně popsaného souboru navazujících akcí.
 Komponenty systému, které vyžadují velké množství dalších částí třetích
 stran jsou složitější na nasazení, než komponenty, které využívají pouze
 standardní funkcionality a technologie daného systému.
 Ideálním stavem pak je, když můžeme do systému přidávat komponenty bez
 nutnosti zásahu do stávající architektury.
 (Martin, 2018)
\end_layout

\begin_layout Standard
Pro to, aby informační systém dokázal pružně a rychle reagovat na změny
 v jeho okolí - změny ve vstupech a výstupech či v legislativě, je potřeba,
 aby s těmito změnami dokázaly pracovat jeho jednotlivé komponenty.
 Pokud firma používá řešení, které si sama vyvinula, nebo používá proprietární
 software od svého dodavatele, je za podmínky, že dojde ke změně okolí jejího
 IS, v prvním případě odkázána na své kapacity, v druhém případě na kapacity
 svého dodavatele, aby dané změny zapracoval do systému a jeho konkrétní
 komponenty.
 V případě veřejně využívaného open source řešení je možnost zvýšit flexibilitu
 a snížit náklady díky komunitnímu vývoji.
 (VonFange a Lavigne 2011)
\end_layout

\begin_layout Standard
Z důvodů popsaných v předchozích odstavcích jsem se rozhodl vytvořit open
 source Salesforce aplikaci, která umožní jednoduchou konfiguraci integrace
 dat mezi Salesforce a ABRA Flexibee.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
subsection*{Cíle práce} 
\backslash
label{sec:cile} 
\backslash
addcontentsline{toc}{subsection}{
\backslash
nameref{sec:cile}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Cílem bakalářské práce je vytvořit business požadavky a na jejich základě
 navrhnout datový model, architekturu a webové služby pro obecně použitelnou
 integraci Salesforce Sales Cloud (dále jen SFSC) s účetním systémem ABRA
 Flexibee.
 Řešení je postaveno na standardním datovém modelu a automatizačních nástrojích
 SFSC s minimálními nutnýmy rozšířeními pro potřeby integrace.
 Součástí práce je také ověření funkčnosti pomocí testovacích dat a vytvoření
 regresních testů.
\end_layout

\begin_layout Standard
Dílčí cíle práce: 
\end_layout

\begin_layout Itemize
DC1: Analyzovat data, která účetní systém potřebuje získávat.
 
\end_layout

\begin_layout Itemize
DC2: Zanalyzovat a popsat část standartního datového modelu SFSC obsahujícího
 data potřebná pro účetní systém.
 
\end_layout

\begin_layout Itemize
DC3: Navrhnout a realizovat datový model pro data, která nejsou pokryta
 ve standardním modelu.
 
\end_layout

\begin_layout Itemize
DC4: Navrhnout a realizovat webové služby pro integraci dat mezi systémy.
 Automatizovat integraci pomocí vhodných nástrojů.
\end_layout

\begin_layout Itemize
DC5: Vytvořit SFSC aplikaci s uživatelským rozhraním pro konfiguraci integrace.
\end_layout

\begin_layout Itemize
DC6: Ověřit funkčnost pomocí testovacích dat a regresních testů
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
subsection*{Metoda dosažení cílů} 
\backslash
label{sec:metoda} 
\backslash
addcontentsline{toc}{subsection}{
\backslash
nameref{sec:metoda}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Pro zpracování teoretické části práce byla provedena rešerše zdrojů, které
 jsou relevantní pro návrh a implementaci informačních systémů a architekturu
 čitelného a škálovatelného software.
 V praktické části jsem analyzoval datový model a webové služby systému
 ABRA Flexibee, poté analyzoval část datového modelu SFSC, která je relevantní
 pro účetní systém, pomocí modelování zmapoval uchovávaná data v jednotlivých
 systémech a poté na základě komparace těchto modelů namapoval přenos dat
 mezi systémy, díky komparaci modelů je také zjištěno, jestli je potřeba
 datový model SFSC rozšířit.
 Samotný vývoj webových služeb, uživatelské aplikace a vytvoření testů je
 pak dosaženo pomocí vlastních zkušeností a využitím získaných poznatků
 a best practices z teoretické části.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
subsection*{Očekávané přínosy} 
\backslash
label{sec:prinosy} 
\backslash
addcontentsline{toc}{subsection}{
\backslash
nameref{sec:prinosy}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Přínosem práce má být zefektivnění a zlevnění vývojové fáze implementace
 SFSC s integrací na účetní systém ABRA Flexibee.
 Po úpravách zdrojového kódu lze tuto práci použít i pro integraci s jinými
 podobnými účetnímy systémy.
 Z důvodu využití standardních SFSC objektů a automatizančích nástrojů lze
 toto řešení implementovat bez dodatečných úprav v organizacích SFSC, které
 využívají standardní datový model.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
subsection*{Omezení} 
\backslash
label{sec:omezeni} 
\backslash
addcontentsline{toc}{subsection}{
\backslash
nameref{sec:omezeni}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Z důvodu využití standartních objektů nelze bez nutnosti úpravy kódu implementov
at pro organizace SFSC, které využívají nestandardní datový model.
 Ovládání skrze custom UI je omezeno pouze na Salesforce Lightning, použití
 v Classic není podporováno, i v něm ale lze využít datový model, automatizace
 a webové služby.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
subsection*{Výstupy} 
\backslash
label{sec:vystupy} 
\backslash
addcontentsline{toc}{subsection}{
\backslash
nameref{sec:vystupy}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Hlavním výstupem práce je aplikace pro SFSC, která umožňuje jednoduchou
 konfiguraci integrace SFSC na ABRA Flexibee skrze UI.
 Aplikace je veřejně dostupná jako open source metadata a zdrojový kód ve
 verzovacím systému na platformě GitHub.
 Metadata a zdrojový jsou uloženy ve formátu pro práci se SFDX.
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Rešerše zdrojů
\end_layout

\begin_layout Standard
Tato kapitola má za cíl zmapovat a prostudovat relevantní zdroje k práci.
 Integrace dat mezi systémy je obsáhlé téma, které čerpá znalosti z mnoha
 částí IT, proto zde jsou uvedeny zdroje, které se týkají architektury a
 návrhu softwaru a informačních systémů, bezpečnosti webových služeb a vývoji
 na platformě Salesforce.
 Platfroma Salesforce i systém ABRA Flexibee mají na webu veřejně dostupné
 podrobné dokumentace.
 Salesforce navíc nabízí komunitní fóra, kde je možné dohledat konkrétní
 specifické nebo výjimečné problémy, které nejsou popsány v dokumentaci
 a již se s nimi někdo jiný setkal.
 
\end_layout

\begin_layout Subsection
Odborné knihy a akademické práce
\end_layout

\begin_layout Standard
Kniha 
\shape italic
Tvorba informačních systémů: principy, metodiky, architektury
\shape default
 (Bruckner et al., 2012) dává dohromady poznatky v analýze a návrhu podnikových
 informačních systémů.
 Nabízí seznam metodik a způsobu jejich uplatnění při řešení jednotlivých
 částí analýzy a návrhu IS.
 Dále také shrnuje jednotlivé notace pro modelování částí IS.
\end_layout

\begin_layout Standard
Baklářská práce 
\shape italic
Continuous Delivery on the Salesforce Platform
\shape default
 (Kratochvíl, 2019) se zabývá vývojem a jeho automatizací na cloudové platformě
 Salesforce s využitím verzovacího systému a vytvořených Javovských scriptů.
 Popisuje technologii SFDX, Salesforce metadata a způsob práce s nimi.
 Z této práce je hlavně důležitá část, která se zabývá práce s metadaty,
 jejich exportem z vývojového prostředí, ukládáním a migrací do konkrétních
 Salesforce organizací.
\end_layout

\begin_layout Standard
Další kniha 
\shape italic
Clean architecture: a craftsman's guide to software structure and design
 
\shape default
(Martin, 2018)
\shape italic
 
\shape default
je teoretický souhrn z oblasti architektury a designu softwaru pro jeho
 jednoduchou čitelnost a škálovatelnost.
 Pokrývá jak funčkní, tak objektově orientované programování.
 Zabývá se vhodnosti použití dědičnosti, rozhraní a polymorphismem v určitých
 situacích, jak navrhovat strukturu dat pro přenos v rámci systému a mimo
 něj.
 Popisuje hlavní best practices pro škálovatelnost softwaru a jeho komponent.
\end_layout

\begin_layout Standard
Kniha 
\shape italic
Requirements Writing for System Engineering 
\shape default
(Koelsch, 2016) pokrývá oblast analýzy požadavků.
 Seznamuje s principy, jak sesbírat všechny funkční i nefunkční poožadavky,
 které bude v projektu potřeba brát na vědomí a implementovat, jejich znázornění
 pomocí modelování a převedení na use cases a user stories pro agilní vývoj.
\end_layout

\begin_layout Subsection
Internetové zdroje a odborné články
\end_layout

\begin_layout Standard
ABRA poskytuje ke svému produktu Flexibee přehlednou dokumentaci 
\shape italic
Dokumentace REST API: Dokumentace a referenční příručka FlexiBee REST API
\shape default
 (Abra, nedatováno), ze které lze vycházet při samotné implementaci integrace
 dat.
 Lze z ní vyčíst jednotlivé webové služby pro import a export dat a samotnou
 strukturu dat pro komunikaci mezi systémy.
\end_layout

\begin_layout Standard
Na straně Salesforce také existuje rozsáhlá dokumentace 
\shape italic
Salesforce Developer Documentation
\shape default
 (Salesforce, nedatováno), která pokrývá oblasti datového modelování, psaní
 kódu pomocí jazyku Apex a vytváření uživatelského rozhraní pomocí LWC a
 standartdních salesforce nástrojů a komponent.
 Oblasti, které nepokrývá dokumentace lze dohledat na Salesforce vývojářských
 fórech 
\begin_inset CommandInset href
LatexCommand href
target "https://trailblazers.salesforce.com/answers"

\end_inset

, ovšem zde je nutno být opatrný a skeptický, jelikož se nejedná o officiální
 řešení problému a je nutné si navrhovaný postup ověřit i z jiného zdroje.
\end_layout

\begin_layout Standard
Oblastí bezpečnosti se zabývá práce 
\shape italic
Web Services Attacks and Security- A Systematic Literature Review 
\shape default
(Varsha, Jevitha, 2016), která shrnuje možné typy útoků na webové služby
 a které se budou muset brát v potaz při návrhu webových služeb v této práci.
\end_layout

\begin_layout Standard

\shape italic
On the Need for a General REST-Security Framework
\shape default
 (Iacono, Gorski, 2019) analyzuje bezpečnostní slabiny architektury rozhraní
 REST, uvadí jeho slabiny a navrhuje metodiku, jak zabezpečit služby, které
 jsou na REST založeny.
 Dále také porovnává jednotlivé metody autentizace webových služeb.
\end_layout

\begin_layout Standard
Pro oblast designu UI vycházím hlavně ze standardů 
\shape italic
Salesforce Lightning Design System
\shape default
 (Salesforce Lightning Design System , nedatováno), kde jsou k dispozici
 officiální nástroje, návody a blueprinty pro návrh a implementaci UI v
 prostředí Salesforce Lightning.
\end_layout

\begin_layout Section
Teoretická východiska práce
\end_layout

\begin_layout Standard
Účelem této sekce práce je popsat teoretické podklady a vysvětlit základní
 termíny, na jejichž základě bude implementováno řešení v praktické části.
 První část se zabývá informačním systémem jako takovým, jeho definicí,
 využitím a životním cyklem.
\end_layout

\begin_layout Standard
Další části se zabývají konkrétními systémy Salesforce CRM a ABRA Flexibee,
 jde o jejich představení a základních charakteristiky.
 Následně představuji technologie na kterých bude řešení postaveno.
\end_layout

\begin_layout Subsection
Informační systém
\end_layout

\begin_layout Standard
Informační sytém je soubor technologií, lidí, dat a prostředků jehož cílem
 je zajištění správných informací ve správný čas na správném místě.
 Správným místem je myšlena osoba, jiný systém nebo jiná část systému, která
 tu konkrétní informaci využívá k podpoře svých rozhodovacích a řídících
 procesů.
 (Bruckner et al., 2012)
\end_layout

\begin_layout Standard
Pro grafické znázornění komponent informačního systému a toku dat mezi nimi
 přikládám níže jednoduché schéma (Obrázek 1).
\end_layout

\begin_layout Subsubsection
Systém pro řízení vztahů se zákazníky
\end_layout

\begin_layout Standard
Systém pro řízení vztahů se zákazníky (CRM z anglického názvu Customer Relations
hip Management) je informační systém pro podporu všech procesů, které zahrnují
 zákazníky podniku.
 Tím jsou myšleny procesy pro získávání nových zákazníků a poskytování služeb
 těm stávajícím.
\end_layout

\begin_layout Subsubsection
Ekonomický systém
\end_layout

\begin_layout Standard
Ekonomický / účetní systém je dnes již součástí většiny firem,
\end_layout

\begin_layout Standard
Hlavními úkoly ekonomického informačního systému je evidence dokladů spojených
 s účetnictvím, zpracování a výpočet mezd a výkaznictví.
 Měly by pracovat s aktuálními právními předpisy, převážně se zákonem o
 účetnictví - Zákon č.
 563/1991 Sb.
\end_layout

\begin_layout Subsection
Salesforce CRM
\end_layout

\begin_layout Standard
Salesforce je nejrozšířenější cloudová platforma na světě, zaměřená na zajištění
 procesů spjatých s CRM.
 (Gartner, 2019) Skládá se z několika modulů, které si každý může uživatel
 nakombinovat tak, aby jimi zajistil své konkrétní procesy.
\end_layout

\begin_layout Standard
Salesforce je SaaS i PaaS zároveň, jelikož nabízí předem hotová řešení -
 viz.
 Sales Cloud, Marketing Cloud a další, tak umožňuje uživatelům vyvíjet své
 vlastní aplikace, což je i předmětem této práce.
\end_layout

\begin_layout Standard
Hlavními moduly jsou (Salesforce EMEA, Customer 360):
\end_layout

\begin_layout Itemize
Sales Cloud - Zahrnuje podporu procesů spjatých s managementem obchodních
 příležitostí a získáváním nových leadů
\end_layout

\begin_layout Itemize
Service Cloud - Podporuje procesy pro řízení zákaznického servisu - dotazy,
 reklamace, sttížnosti, zpětná vazba apod.
\end_layout

\begin_layout Itemize
Marketing Cloud - Nástroj pro podporu procesů spojených s marketingem -
 automatizování newsletterů, analýza marketingových kampaní, tvorba cíleného
 obsahu na určité skupiny zákazníků
\end_layout

\begin_layout Itemize
Commerce Cloud - Platforma pro vytváření a správu škálovatelných eshopů,
 skládá se ze samostatných B2B a B2C částí.
\end_layout

\begin_layout Itemize
Analytics - Nástroj pro BI
\end_layout

\begin_layout Itemize
Experience Cloud - Nástroj, který umožňuje vystavit funkcionalitu se kterou
 mohou přímo interagovat zákaznici a dodavatelé společnosti - typicky self-servi
ce služby.
\end_layout

\begin_layout Itemize
a další
\end_layout

\begin_layout Subsubsection
Datový model
\end_layout

\begin_layout Standard
Salesforce poskytuje hotový datový model pro podporů procesů jednotlivých
 modulů.
 Tento předem hotový datový model se nazývá standardní.
\end_layout

\begin_layout Standard
Standardní datový model pro Sales a Service Cloud zahrnuje entity (SObject
 v Salesforce názvosloví) pro správu zákazníků a kontaktů, objednávek a
 faktur, obchodních příležitostí, uživatelů, dokumentů a spoustu dalších
 - všechny lze nalézt v dokumentaci : 
\begin_inset CommandInset href
LatexCommand href
target "https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/data_model.htm"
literal "false"

\end_inset

.
 (Salesforce, 
\shape italic
Salesforce Developer Documentation
\shape default
)
\end_layout

\begin_layout Standard
Datový model, který vytvoří uživatel se nazývá custom (od custom made),
 uživatel může rozšířit standardní entity o jednotlivé atributy (pole SObjectu
 v Salesforce názvosloví), nebo vytvářet celé entity včetně relací na standardní
 i custom datový model.
 V salesforce existují dva způsoby relací - lookup a master-detail.
\end_layout

\begin_layout Standard
Lookup relace
\end_layout

\begin_layout Standard
Lookup pole umožňuje nadefinovat relaci mezi dvěma SObjecty, funguje na
 principu cizího klíče, relace na rodiče není povinná - může být null.
 (Salesforce, 
\shape italic
Salesforce Developer Documentation
\shape default
)
\end_layout

\begin_layout Standard
Master-Detail relace
\end_layout

\begin_layout Standard
Master-Detail je striktnější formou relace, která poskytuje funkcionality
 navíc.
 Umožňuje na rodiči vytvářet tzv.
 roll-up summary fields, které poskytují kalkulaci SUM, AVG, MIN, MAX z
 dceřinných záznamů.
 Master-Detail ovlivňuje i CRUD práva na dceřinnou entitu - přístup na rodiče
 uerčuje přístup na dceřinnou entitu.
 Používá se pro vytváření M:N relací skrze junction tabulku.
 (Salesforce, 
\shape italic
Salesforce Developer Documentation
\shape default
)
\end_layout

\begin_layout Subsubsection
Vývoj na platformě Salesforce
\end_layout

\begin_layout Standard
Následující kapitola se zabývá způsobem vývoje a vývojářskými nástroji,
 které Salesforce poskytuje.
 Popisuji zde nástroje pro tradiční i low-code vývoj, kapitola předpokládá
 základní znalosti objektového programování a algoritmizace.
\end_layout

\begin_layout Standard
APEX
\end_layout

\begin_layout Standard
APEX je objektově orientovaný programovací jazyk, který byl vyvinut přimo
 pro platformu Salesforce.
 Má syntaxe podobné jazyku Java a využívá se pro psaní logiky všech server
 - side operací.
 Zahrnuje v sobě podporů pro práci s databází, jako je psaní DML operací
 (insert, update, delete, select, upsert) a triggerů včetně jejich logiky.
 Dále se pomocí něj také píší webové služby a API callouty.
 (Salesforce, 
\shape italic
Salesforce Developer Documentation
\shape default
)
\end_layout

\begin_layout Standard
Automatizační nástroje
\end_layout

\begin_layout Standard
Salesforce nabízí svým uživatelům širokou škálu automatizačních nástrojů,
 jejichž spouštěčem může být událost nad záznamem v databázi nebo mohou
 být spouštěny pravidelně v nějakém časovém intervalu.
\end_layout

\begin_layout Standard
Dostupnými automatizačními nástroji jsou:
\end_layout

\begin_layout Itemize
Apex - Umožňuje psaní after a before triggerů nad objekty (insert, update,
 delete undelete) a časově spustitelných událostí.
\end_layout

\begin_layout Itemize
Flow - komplexní grafický automatizační nástroj, který se skládá z mnoha
 jednotlivých komponent, umožňuje kombinaci s apexem
\end_layout

\begin_layout Itemize
Process Builder - jednoduchý grafický nástroj, funguje na principu několika
 na sebe navazující if / then tvrzení
\end_layout

\begin_layout Itemize
Workflow - jednoduchý automatizační nástroj, používající pouze jedno if
 / then tvrzení 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status collapsed

\begin_layout Plain Layout
Následující obrázek znázorňuje porovnání automatizačních nástrojů podle
 jednoduchosti na použití, škály případů použití, možnost narazení na limity
 a schopnost je obejít, škálovatelnosti, schopnosti daný nástroj debuggovat,
 uživatelské přívětivosti v případě chyby, možnosti testování daného nástroje,
 rychlosti exekuce, jednoduchosti nasazení a jak moc je nástroj odolný proti
 riziku, že kvůli němu rozbijem již existující funkcionalitu.
\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/tomaschour/Desktop/Screenshot 2021-04-09 at 10.53.32.png
	width 80page%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Porovnání automatizačních nástrojů (Zdroj: Liu, 2018)
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Omezení
\end_layout

\begin_layout Standard
Jelikož Salesforce organizace je součástí multitenantního prostředí - skupina
 organizací sdílí zdroje jednoho serveru (instance), tak aby nedocházelo
 k výkyvům výkonu, Salesforce vynucuje limity pro operace v rámci jedné
 transakce, které čerpají serverové zdroje, které nesmějí jednotlivé organizace
 překročit.
 Operace která takový limit překročí je ukončena vyjímkou.
 Při psaní kódu a vytváření automatizací je tedy potřeba aby byla daná operace
 co nejvíce optimalizovaná.
 Některé limity se liší pro synchronní a asynchronní operace.
\end_layout

\begin_layout Standard
Mezi hlavní limity patří: 
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="8" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Omezení
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Synchronní
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Asynchronní
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Maximální počet záznamů načtených pomocí SOQL dotazů
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
50 000
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Maximální počet DML operací (vyjma selectů)
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
150
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Maximální počet HTTP volání
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Maximální kumulativní čas pro všechny HTTP volání
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
120 s
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Maximální čas využití CPU serveru
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
10 000 ms
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
60 000 ms
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Maximální velikost haldy
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6 MB
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
12 MB
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Maximální počet SOQL dotazů
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
200
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Hlavní limity pro operace v Salesforce (Zdroj: (Salesforce, Execution Governors
 and Limits)
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Customizace a nasazení do prostředí
\end_layout

\begin_layout Standard
Všechny součásti systému (datový model, profily, triggery, automatizace,
 UI, webové služby a další) jsou v Salesforce reprezentovány metadata soubory.
 Vytváření některých metadata souborů je, aby se předešlo rozbití současného
 řešení, v produkčním prostředí zakázáno a proto musí být tato metadata
 vytvořena na nižším prostředí (sandbox, developer edition) a následně zmigrován
a do produkce.
 Existuje několik základních způsoby nazení: (Kratochvíl, 2019)
\end_layout

\begin_layout Itemize
Change set - Jde o přímé přetažení dat mezi dvěmi propojenými prostředími
 bez nutnosti vytváření kopie metadat na lokálním zařízení.
 Change set se vytváří pomocí deklarativního nástroje, který je součástí
 Salesforce.
 Nevýhodou tohoto řešení je absence verzovacího systému a absence SSOT při
 použití více vývojových prostředí.
\end_layout

\begin_layout Itemize
Unmanaged package - Je balíček metadat, který je vytvořený v libovolném
 prostředí a může být nainstalován na kterékoliv nepropojené prostředí,
 používá se k distribuci open source funkcionalit.
\end_layout

\begin_layout Itemize
Managed package - Podobný jako unmanaged package s tím rozdílem, že jde
 o closed source, po nainstalování balíčku, nemá uživatel možnost zobrazit
 ani upravovat daná metadata.
 Použivá se pro distribuci placených funkcionalit nezávislými vývojářskými
 společnostmi nebo Salesforce partnery.
\end_layout

\begin_layout Itemize
Metadata API - Rozhraní, které umžňuje CRUD nad metadata soubory v daném
 prostředí, narozdíl od change setů umožňuje použít jako zdroj souborů i
 jiné možnosti než Salesforce organizaci - např.
 lokální strom souborů, nebo verzovací systém.
 K využití Metadata API se používají další nástroje, které soubory zpracují
 a odešlou HTPP request - např.
 Ant Migration Tool nebo Salesforce CLI.
 Výhodou využití takového middlewaru je to, že pro práci s metadaty můžeme
 využít formát SFDX, který je pro člověka lépe čitelný a snadněji se v něm
 sledují změny oproti klasickému Metadata formátu.
 (Kratochvíl, 2019)
\end_layout

\begin_layout Subsection
Abra Flexibee
\end_layout

\begin_layout Standard
Abra FlexiBee je ekonomický systém od firmy ABRA Flexi s.r.o., který funguje
 v cloudu i on-premise s tenkým klientem.
 Nabízí moderní přehledné prostředí se zpracováním dat do dashboardů.
 Je multiplatformní, podporuje webový přístup z webových prohlížečů, klientský
 přístup z macOS, Windows a Linux i mobilní přístup z Android a iOS zařízení.
 (ABRA FLEXI S.R.O., Abra Flexi)
\end_layout

\begin_layout Standard
V současnosti používá FlexiBee přes 6500 zákazníků.
 (System Online, Abra FlexiBee)
\end_layout

\begin_layout Subsubsection
REST API
\end_layout

\begin_layout Standard
FlexiBee obsahuje rozhraní REST API pro integraci s externími informačními
 systémy, poskytuje pro něj přehlednou dokumentaci, která je dotupná na
 : https://intercom.help/podpora-flexi/cs/collections/2592813-dokumentace-rest-ap
i .
 Rozhraní podporuje všechny CRUD operace a základním formátem dat pro komunikaci
 je JSON a XML, mimo to dokáže importovat a exportovat data i v CSV a XLS.
\end_layout

\begin_layout Subsubsection
WebHooks
\end_layout

\begin_layout Standard
WebHooks je způsob automatického propojení systému / aplikace (publisher)
 s několika externími systémy / aplikacemi (subscribers).
 Při použití WebHooks se zpráva posílá z publisher systému při nějaké události
 v něm (např.
 změna záznamu v databázi nebo vnitřní event) na všechny zaregistrované
 subscriber URL.
 (Guay, 2020)
\end_layout

\begin_layout Standard
FlexiBee má možnost implementace WebHooks, kdy se HTTP POST request posílá
 při změně obsahu databáze ABRA Flexi a obsahem jeho zprávy je výpis všech
 změn od posledního zavolání hooku.
 Pokud nastane chyba při doručování zprávy, je zpráva odesílána opakovaně
 v postupně se prodlužujících intervalech.
 Aby FlexiBee považovalo zprávu za úspěšně doručenou, nesmí její zpracování
 v cílovém systému přesáhnout 30 vteřin, respektive musí do 30 vteřin subscriber
 odpovědět se status kódem 2xx.
 Ideální implementací je pak, že subscriber odpoví úspěšným statusem 2xx
 okamžitě poté, co obdrží zprávu se změnami a samotné jejich zpracování
 probíhá asynchroně.
 (Abra, Dokumentace REST API).
\end_layout

\begin_layout Standard
V případě výše zmíněného navrhovaného způsobu implementace WebHooks podotýkám,
 že je nutné ošetřit případ, kdy subscriber odpoví úspěšným statusem a pak
 dojde k chybě v asynchroním zpracování dat.
 V takovém případě je nutné, aby se daný systém dotázal dodatečně na data,
 která nedokázal zpracovat, zalogoval chybu a takový záznam označil, pokud
 je ani po dodatečném dotazu nelze zpracovat, aby nebyla porušována integrita
 dat mezi systémy.
\end_layout

\begin_layout Subsection
Datová integrace v informačním systému
\end_layout

\begin_layout Standard
Cílem této kapitoly je prozkoumat a zmapovat způsoby integrace dat mezi
 komponentami informačního systému podniku.
 Druhá část kapitoly se zabývá zabezpečením přenosu a přístupu k datům.
\end_layout

\begin_layout Standard

\shape italic
\begin_inset Quotes gld
\end_inset

Integrace softwarového produktu je proces, kterým se softwarový produkt
 propojuje s ostatními softwarovými komponentami informačního systému podniku
 (sdílení společných dat, využívání funkcionality komponenty jinou komponentou
 apod.).
\begin_inset Quotes grd
\end_inset

 
\shape default
(Bruckner et al., 2012)
\end_layout

\begin_layout Subsubsection
Typy datové integrace podle práce s daty
\end_layout

\begin_layout Standard
Konsolidace
\end_layout

\begin_layout Standard
Konsolidace dat je způsob integrace, kdy data získaná z několika různých
 zdrojů jsou převedena do jednotného formátu, očištěna od duplicit a nahrána
 do jednoho zdrojového systému / databáze.
 Cílem konsolidace je zredukovat počet různých míst, na kterém jsou data
 uložena a tím snížit nároky na úložný prostor a údržbu jejich integrity.
 Datová konsolidace využívá nástrojů pro ETL (extract, transform, load).
 (Foote, 2019)
\end_layout

\begin_layout Standard
Propagace
\end_layout

\begin_layout Standard
Propagace dat se používá k přenesení dat z jednoho systému (nebo jeho komponenty
) do jiného, který tato data využívá k zajištění svých procesů.
 Může být řešena synchronně i asynchronně.
 (Foote, 2019) Často se používá v případě, že jako uživatel zdrojového systému
 potřebuji získat near-realtime odpověď na základě zpracovných odeslaných
 dat.
 (Foote, 2019)
\end_layout

\begin_layout Standard
Virtualizace
\end_layout

\begin_layout Standard
Datová virtualizace využívá rozhraní mezi místy, kde jsou data fyzicky uložena
 a a systémem nebo jeho částí, který k daným datům přistupuje.
 Rozhraní slouží jako abstrakční vrstva a stará se o transformaci dat z
 různých zdrojů do jednoho formátu, tím pádem se během přístupu k datům
 nemusí odlišovat formát při přístupu k rozdílným zdrojům.
 Při virtualizaci nedochází k dlouhodobému ukládání transformovaných dat.
 (Foote, 2019)
\end_layout

\begin_layout Standard
Federace
\end_layout

\begin_layout Standard
Datová federace je způsob abstrakce dat, při kterém je využívána virtuální
 databáze, která sjednocuje data z mnoha databází do jednoho datového modelu.
 Data jsou uložena samostatně v jednodlivých databázích a při dotazu virtuální
 databáze řeší, ze kterých konkrétních databázích má data získat a sjednotit
 do společného předem nadefinovaného datového modelu.
 To umožňuje například získat v rámci jednoho dotazu data o entitě zákazník,
 jejichž jedna část je uložena v databázi pro CRM a druhá v databázi pro
 ERP.
 (Foote, 2019)
\end_layout

\begin_layout Subsubsection
Typy datové integrace podle spouštěče
\end_layout

\begin_layout Standard
Přenos dat v informačním systému může být iniciován na základě různých typů
 spouštěčů.
 Každý druh spouštěče je vhodný pro jiný případ užití a lze je v rámci informačn
ího dystému kombinovat.
\end_layout

\begin_layout Standard
Event-driven
\end_layout

\begin_layout Standard
O událostí řízenou integraci jde v případě, že přenos dat je spouštěn jakoukoliv
 předem definovanou událostí (event).
 Může jít o kliknutí uživatelem na tlačítko, načtení čipové karty.
 Na událost z výchozího systému je vždy navázána událost v cílových systémech.
 Používá se především v případech, kdy nedochází ve výchozím sýstému ke
 změně v datech, ale chceme z něj pouze dát vědět jinému systému, že má
 něco udělat.
\end_layout

\begin_layout Standard
Data-driven
\end_layout

\begin_layout Standard
Integrace řízená na základě změny v datech jsou spouštěny událostí v jedné
 z databází v systému (create, update, delete, undelete).
 Je vhodná v případě, že data nebo jejich část uchováváme v obou systémech.
\end_layout

\begin_layout Standard
Jak v případě event-driven, tak data-driven spouštěčů může výměna zpráv
 probíhat několika způsoby (Hohpe, 2017):
\end_layout

\begin_layout Itemize
Fire-and-Forget: Výchozí systém vyšle zprávu a nezajímá se o to, jestli
 byla zpracována.
\end_layout

\begin_layout Itemize
Request-Response: Žadatel pošle dotaz a čeká na odpověď, uživatel mezitím
 nemůže nic dělat, po získání odpovědi je zpracována a uživatel může pokračovat.
\end_layout

\begin_layout Itemize
Request-Delayed Response: Asynchronní způsob request-response, žadatel pošle
 dotaz, ale nečeká na odpověď, uživatel může v systému dále pracovat a ten
 mezitím poslouchá na asynchronním vlákně na odpověď, kterou zpracuje poté,
 co dorazí.
\end_layout

\begin_layout Itemize
Data Enrichment: Výchozí systém vyšle neúplnou zprávu (například pouze identifik
ační číslo objednávky) a cílové systémy se poté samostnatně dotazují na
 pro ně relevantní data.
\end_layout

\begin_layout Standard
Polling
\end_layout

\begin_layout Standard
Jedná se o dotazování žadatele poskytovatele v pravidelných časových intervalech.
 Nevýhodou tohoto řešení je, že dotazy jsou realizovány i v případě, že
 nedošlo k žádné změně v datech a data mohou být v mezičase mezi jednotlivými
 dotazy desynchronizována.
 (Hohpe, 2017)
\end_layout

\begin_layout Subsubsection
Způsoby integrace dat
\end_layout

\begin_layout Standard
Manuální
\end_layout

\begin_layout Standard
Manuální způsob integrace dat vyžaduje po osobě, která je za danou integraci
 nebo její část zodpovědná, ručně sesbírat relevantní data ze všech zdrojů,
 následně tato data očistit a uložit do společné databáze.
 Přitom není zaručena konzistence dat a nabízí se široký prostor pro chyby.
 Tento způsob se téměř nevyužívá a dává smysl jen pro malé jednorázové integrace
 - např.
 zanesení málo často se neměnných číselníků o malém množství záznamů.
\end_layout

\begin_layout Standard
Appliaction-Based
\end_layout

\begin_layout Standard
Softwarová aplikace se stará o vyzvednutí, transformování a přenesení dat.
 Tyto aplikace jsou náročné na vývoj, ale nabízí vysokou míru customizace
 a škálovatelnosti.
\end_layout

\begin_layout Standard
Middleware
\end_layout

\begin_layout Standard
Middleware je software, který funguje jako prostředník pro předávání dat
 mezi aplikacemi.
 Často se používá pro integraci zastaralých aplikací, které nemají moderní
 API a vývoj integračního softwaru by pro ně byl velmi náročný, nad těmito
 legacy aplikacemi poskytuje abstrakci, díky níž je práce s nimi jednodušší.
 Middleware má v sobě často zabudovány nástroje pro logování a debugging.
\end_layout

\begin_layout Standard
Jednotný přístup k datům
\end_layout

\begin_layout Standard
Jednotný přístup k datům (Uniform data access) je metoda, kdy data jsou
 uložena v původním formátu ze zdrojových databází, ale při jejich vyzvednutí
 jsou přeloženy do jednotného formátu.
 Nabízí jednotný pohled na data, která jsou z několika různých databází.
\end_layout

\begin_layout Standard
Common Storage
\end_layout

\begin_layout Standard
Jde o způsob, kdy data jsou vyzvednuta z různých databází očištěna od duplicit
 a sjednocena do jedné databáze.
 Aplikace poté přistupu pouze do této databáze.
\end_layout

\begin_layout Subsubsection
Bezpečnost
\end_layout

\begin_layout Standard
Autentizace
\end_layout

\begin_layout Standard
Autorizace
\end_layout

\begin_layout Section
Analýza požadavků
\end_layout

\begin_layout Standard
TODO
\end_layout

\begin_layout Standard
Na základě rešerše byly definovány požadavky na výsledné řešení.
 Požadavky jsou rozděleny do skupin na funkční a nefunkční.
 Všechny požadavky jsou znázorněny na Obrázku TODO
\end_layout

\begin_layout Standard
Všechny požadavky jsou následně samostatně popsány.
\end_layout

\begin_layout Enumerate
Pravidelná automatická synchronizace uzavřených objednávek SFSC do ABRA
 Flexibee
\end_layout

\begin_layout Enumerate
Možnost přidávat, odebírat data k synchronizaci přes UI
\end_layout

\begin_layout Enumerate
Možnost spustit synchronizaci okamžitě skrze UI
\end_layout

\begin_layout Enumerate
Možnost parametrizovat automatickou synchronizaci skrze UI
\end_layout

\begin_layout Enumerate
Logování
\end_layout

\begin_layout Subsection
Funkční požadavky
\end_layout

\begin_layout Subsubsection
F1 Automatická synchronizace uzavřených objednávek ze SFSC do ABRA Flexibee
\end_layout

\begin_layout Standard
Aplikace bude umožňovat jednostranou synchronizaci uzavřených objednávek
 ze systému Salesforce do systému ABRA Flexibee.
 Tato synchronizace bude probíhat automaticky v pravidelných intervalech.
 Data nebudou odesílána vícekrát, pokud nedojde k jejich změně.
\end_layout

\begin_layout Subsubsection
F2 Automatická synchronizace synchronizace faktur a dobropisů ze SFSC do
 ABRA Flexibee
\end_layout

\begin_layout Standard
Společně s objednávkami bude aplikace synchronizovat všechny faktury a dobropisy
, které se k nim vážou.
 Tato synchronizace musí proběhnout i poté co již objednávka byla propsána
 do systému Flexibee, ale poté k ní přibyl další dokument.
\end_layout

\begin_layout Subsubsection
F3 Parametrizování synchronizace skrze UI
\end_layout

\begin_layout Standard
Aplikace bude poskytovat uživatelské rozhraní pro parametrizaci synchronizace
 dat.
 Tato parametrizace bude zahrnovat:
\end_layout

\begin_layout Itemize
Nastavení intervalu synchronizace
\end_layout

\begin_layout Itemize
Definice mapování atributů mezi systémy
\end_layout

\begin_layout Itemize
Možnost přidat či odebrat atribut pro synchronizaci
\end_layout

\begin_layout Itemize
Možnost vypnutí / zapnutí synchronizace
\end_layout

\begin_layout Standard
Parametrizovat aplikaci budou moci jen uživatelé s příslušným oprávněním.
\end_layout

\begin_layout Subsubsection
F4 Přehled aktuálního nastavení synchronizace
\end_layout

\begin_layout Standard
Aplikace bude nabízet přehled aktuálního nastavení synchronizace včetně
 mapování dat, času poslední proběhlé a následující synchronizace
\end_layout

\begin_layout Subsubsection
F6 Možnost okamžitého spuštení synchronizace skrze UI
\end_layout

\begin_layout Standard
V aplikaci bude možnost spustit synchronizaci okamžitě a nečekat tak na
 pravidelný interval.
 Pravidelná synchronizace nebude tímto okamžitým spuštěním ovlivněna a proběhne
 podle stávajícího nastavení.
\end_layout

\begin_layout Subsubsection
F7 Logování
\end_layout

\begin_layout Standard
Aplikace bude zaznamenávat logy o všech chybách a proběhlých synchronizacích.
\end_layout

\begin_layout Subsection
Nefunkční požadavky
\end_layout

\begin_layout Subsubsection
NF1 Zabezpečení přístupu k aplikaci
\end_layout

\begin_layout Standard
Je nutné zabezpečit aby pouze určití uživatelé měli k aplikaci přístup pro
 čtení a úpravu dat.
 Budou tři úrovně přístupu: nemá přístup k aplikaci vůbec, přístup pro čtení
 dat a spouštění synchronizace a přístup pro čtení, úpravu dat a spuštění
 syncrhonizace.
\end_layout

\begin_layout Subsubsection
NF2 Zabezpečení přístupových údajů do systémů
\end_layout

\begin_layout Standard
Přihlašovací údaje z externího systému musí být vhodně zabezpečena proti
 zneužití.
\end_layout

\begin_layout Subsubsection
NF3 Možnost lokalizace
\end_layout

\begin_layout Standard
Všechen text, názvy entit a jejích atributů musí být možné lokalizovat do
 jazyka, který dané uživatel chce používat.
 Aplikace bude vyvinuta pouze v anglickém jazyce, ale musí být možné vše
 přeložit bez zásahu do kódu a a aplikace musí být o tento překlad jednoduše
 rozšiřitelná.
\end_layout

\begin_layout Subsubsection
NF4 Podpora Salesforce LEX
\end_layout

\begin_layout Standard
Aplikaci bude možné používat v prostředí Salesforce Lightning Experience
 a bude podporovat všechny desktopové webové prohlížeče, které jsou aktuálně
 podporovány Salesforce LEX.
 Těmito prohlížeči jsou (jde o poslední stabilní verzi k datu 1.4.2020 - Salesforc
e Spring '21 release):
\end_layout

\begin_layout Itemize
Microsoft® Edge Chromium
\end_layout

\begin_layout Itemize
Google Chrome™
\end_layout

\begin_layout Itemize
Mozilla® Firefox®
\end_layout

\begin_layout Itemize
Apple® Safari®
\end_layout

\begin_layout Subsubsection
NF5 Škálovatelnost
\end_layout

\begin_layout Standard
Aplikace bude umožňovat škálovatelnost pro synchronizaci dalších entit a
 atributů jež nejsou pokryty v aktuálním rozsahu práce.
 Dále musí umožňovat škálovatelnost překladů viz NF3 a možnost rožšíření
 o synchronizaci dat z ABRA Flexibee do SFSC, což není v rozsahu této práce.
\end_layout

\begin_layout Subsubsection
NF6 Open-source
\end_layout

\begin_layout Standard
Všechny části aplikace včetně datového modelu pro data a metadata budou
 open-source ve formátu SFDX.
\end_layout

\begin_layout Subsubsection
NF7 Nezávislost na licencích třetích stran a speciálních Salesforce licencích
\end_layout

\begin_layout Standard
Aplikace musí být nezávislá na všech licencích třetích stran vyjma Salesforce
 (nutná pouze standardní Salesforce licence) a ABRA Flexi s jedním API uživatele
m.
 Pro její používání nebude potřeba žádná Salesforce speciální licence.
\end_layout

\begin_layout Subsection
Případy užití a role aktérů
\end_layout

\begin_layout Subsubsection
Role aktérů
\end_layout

\begin_layout Standard
Na základě požadavků byly identifikovány tři skupiny aktérů aplikace - Standardn
í uživatel, Administrátor aplikace a Salesforce CRM systém.
 Skupina určuje jaká oprávnění a kompetence bude daný uživatel v aplikaci
 mít.
\end_layout

\begin_layout Standard
Standardní uživatel
\end_layout

\begin_layout Standard
Slouží pro bežné uživatele aplikace.
 Takový uživatel si může zobrazit aktuální nastavení aplikace.
 Z důvodu, aby v případě chybějících dat v cílovém systému mohl identifikovat
 to, jestli se stala chyba během jejich přenosu, nebo jestli se tato data
 synchronizovat nemají.
 Může také spouštět okamžitou synchronizaci pro případ, že by potřeboval
 nová data okamžitě v cílovém systému.
\end_layout

\begin_layout Standard
Administrátor aplikace
\end_layout

\begin_layout Standard
Role administrátora slouží pro uživatele, kteří zodpovídají za parametrizaci
 aplikace a nastavení mapování dat mezi systémy.
 Administrátor má také možnost zobrazit aplikační logy z důvodu debugování.
 Zároveň zahrnuje všechna oprávnění z role Standardního uživatele.
 
\end_layout

\begin_layout Standard
Salesforce CRM systém
\end_layout

\begin_layout Standard
Nejedná se o roli pro uživatele, ale jde o systémového aktéra, který zajišťuje
 automatické spouštění syncrhonizace dat.
\end_layout

\begin_layout Subsubsection
Případy užití
\end_layout

\begin_layout Standard
Podle požadavků a identifikace aktérů byly navrženy a popsány případy užití.
 Následující diagram případů užití znázorňuje relace mezi aktéry a jednotlivými
 případy užití.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/tomaschour/Downloads/Untitled Workspace (1).png
	width 80page%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
UML Diagram případů užití 
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="8" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="left" valignment="middle" width="50page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Identifikátor
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1UC
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Zobrazení nastavení aplikace
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cíl
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Přehled aktuálního nastavení aplikace včetně mapování dat, posledního a
 následujícího času synchronizace.
 Rozděleno do jednotlivých sekcí.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Aktéři
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Standardní uživatel, Administrátor aplikace
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Vstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Uživatel je přihlášen a má otevřenou aplikaci 
\begin_inset Quotes gld
\end_inset

ABRA Flexibee Integration
\begin_inset Quotes grd
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Výstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
—————
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Scénář
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Enumerate
Uživatel klikne na záložku 
\begin_inset Quotes gld
\end_inset

Synchronizace dat
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Načte se aktuální nastavení aplikace a mapovaní z metadat rozdělených do
 podzáložek
\end_layout

\begin_layout Enumerate
Uživatel klikne na konkrétní podzáložku
\end_layout

\begin_layout Enumerate
Uživateli se zobrazí přehled nastavení a mapování podle vybrané sekce
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Alternativní scénář
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Enumerate
Uživatel klikne na záložku 
\begin_inset Quotes gld
\end_inset

Nastavení aplikace
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Během načítání metadat dojde k chybě
\end_layout

\begin_layout Enumerate
Uživateli se zobrazí chybová hláška
\end_layout

\begin_layout Enumerate
Chyba se zaloguje do aplikačních logů
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Případ užití - Zobrazení nastavení aplikace 
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="left" valignment="middle" width="50page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Identifikátor
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2UC
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Zobrazení aplikačních logů
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cíl
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Zobrazení seznamu aplikačních logů rozděleného do sekcí podle úrovně s možností
 vyhledávání a seřazení podle datumu nebo abecedně
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Aktéři
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Administrátor aplikace
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Vstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Uživatel je přihlášen a má otevřenou aplikaci 
\begin_inset Quotes gld
\end_inset

ABRA Flexibee Integration
\begin_inset Quotes grd
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Výstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
—————
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Scénář
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Enumerate
Uživatel klikne na záložku 
\begin_inset Quotes gld
\end_inset

Aplikační logy
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Načte se a zobrazí seznam všech logů
\end_layout

\begin_layout Enumerate
Uživatel vybere úroveň logů
\end_layout

\begin_layout Enumerate
Zobrazí se pouze logy z vybrané úrovně
\end_layout

\begin_layout Enumerate
Uživatel klikne na sloupec podle kterého se mají záznamy seřadit
\end_layout

\begin_layout Enumerate
Záznamy se seřadí sestupně / vzestupně podle vybraného sloupce
\end_layout

\begin_layout Enumerate
Uživatel klikne na číslo konkrétního logu
\end_layout

\begin_layout Enumerate
Načtě se a zobrazí detail daného záznamu
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Případ užití - Zobrazení aplikačních logů 
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="left" valignment="middle" width="50page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Identifikátor
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3UC
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Zadání mapování atributů
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cíl
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Nastavení mapování dat mezi systémy pro jednotlivé entity.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Aktéři
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Administrátor aplikace
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Vstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Uživatel je přihlášen a má otevřenou aplikaci 
\begin_inset Quotes gld
\end_inset

ABRA Flexibee Integration
\begin_inset Quotes grd
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Výstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Uložení metadat proběhlo úspěšně
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Scénář
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Enumerate
Uživatel klikne na záložku 
\begin_inset Quotes gld
\end_inset

Synchronizace dat
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Uživatel klikne na podzáložku 
\begin_inset Quotes gld
\end_inset

Mapování dat
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Uživateli se zobrazí pole pro výběr entity k namapování 
\end_layout

\begin_layout Enumerate
Uživatel vybere entitu
\end_layout

\begin_layout Enumerate
Načte se a zobrazí se seznam dostupných atributů k namapování s checkboxem
 pro aktivaci synchronizace daného atributu a pole pro název odpovídajícího
 atributu v systému ABRA Flexibee s převyplněnými hodnotami podle aktuálního
 nastavení
\end_layout

\begin_layout Enumerate
Uživatel vyplní mapování pro danou entitu a klikne na 
\begin_inset Quotes gld
\end_inset

Uložit
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Metadata se uloží a uživateli se zobrazí hláška o úspěšném uložení
\end_layout

\begin_layout Enumerate
Obrazovka se vrátí na výběr entity
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Případ užití - Zadaní mapování atributů 
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="left" valignment="middle" width="50page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Identifikátor
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4UC
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Parametrizace aplikace
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cíl
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Nastavení zapnutí či vypnutí synchronizace pro jednotlivé entity, intervalu
 a objemu záznamů v jedné transakci pro automatickou synchronizaci
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Aktéři
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Administrátor aplikace
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Vstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Uživatel je přihlášen a má otevřenou aplikaci 
\begin_inset Quotes gld
\end_inset

ABRA Flexibee Integration
\begin_inset Quotes grd
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Výstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Uložení metadat proběhlo úspěšně
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Scénář
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Enumerate
Uživatel klikne na záložku 
\begin_inset Quotes gld
\end_inset

Synchronizace dat
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Uživatel klikne na podzáložku 
\begin_inset Quotes gld
\end_inset

Parametry aplikace
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Uživateli se zobrazí pole pro zadání intervalu synchronizace v minutách,
 pole pro počet záznamů v jedné transakci.
\end_layout

\begin_layout Enumerate
Uživatel změní některou z hodnot a klikne na 
\begin_inset Quotes gld
\end_inset

Uložit
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Metadata se uloží a uživateli se zobrazí hláška o úspěšném uložení
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Případ užití - Parametrizace aplikace 
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="8" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="left" valignment="middle" width="50page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Identifikátor
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
5UC
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Synchronizace dat
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cíl
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Propsání dat z Salesforce CRM do ABRA Flexibee
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Aktéři
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Systém
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Vstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Jsou vyplněna metadata pro synchronizaci dat
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Výstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Synchronizace dat mezi systémy proběhla úspešně
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Scénář
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Enumerate
Uběhne doba intervalu od poslední synchronizace
\end_layout

\begin_layout Enumerate
Načte se nastavení synchronizace
\end_layout

\begin_layout Enumerate
Paralelně jsou spouštěny synchronizace pro jednotlivé entity podle daného
 nastavení
\end_layout

\begin_layout Enumerate
Po dokončení synchronizace je zalogována informace o proběhnutí pro jednotlivé
 entity
\end_layout

\begin_layout Enumerate
Je naplánována další synchronizace podle daného intervalu
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Alternativní scénář
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Enumerate
Synchronizace je spuštěna uživatelem přes okamžitou synchronizaci
\end_layout

\begin_layout Enumerate
Načte se nastavení synchronizace
\end_layout

\begin_layout Enumerate
Paralelně jsou spouštěny synchronizace pro jednotlivé entity podle daného
 nastavení
\end_layout

\begin_layout Enumerate
Po dokončení synchronizace je zalogována informace o proběhnutí pro jednotlivé
 entity
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Případ užití - Synchronizace dat
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="8" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="left" valignment="middle" width="50page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Identifikátor
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6UC
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Manuální spuštění synchronizace dat
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cíl
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Okamžité spuštění propsání dat z Salesforce CRM do ABRA Flexibee
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Aktéři
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Stadardní uživatel
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Vstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Jsou vyplněna metadata pro synchronizaci dat
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Výstupní podmínky
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Synchronizace dat mezi systémy proběhla úspešně
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Scénář
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Enumerate
Uživatel klikne na záložku 
\begin_inset Quotes gld
\end_inset

Synchronizace dat
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Uživatel klikne na podzáložku 
\begin_inset Quotes gld
\end_inset

Průběh synchronizace
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Uživateli se zobrazí obrazovka s posledním a dalším časem synchronizace
 a tlačítkem pro okamžitou syncrhonizaci
\end_layout

\begin_layout Enumerate
Uživatel klikne na tlačítko pro okamžitou synchronizaci
\end_layout

\begin_layout Enumerate
Uživateli se zobrazí hláška o začátku sycnrhonizace
\end_layout

\begin_layout Enumerate
Tlačítko je deaktivováno
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Alternativní scénář
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Enumerate
Uživatel klikne na záložku 
\begin_inset Quotes gld
\end_inset

Synchronizace dat
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Uživatel klikne na podzáložku 
\begin_inset Quotes gld
\end_inset

Průběh synchronizace
\begin_inset Quotes grd
\end_inset


\end_layout

\begin_layout Enumerate
Synchronizace dat právě běží
\end_layout

\begin_layout Enumerate
Uživateli se zobrazí obrazovka s posledním a dalším časem synchronizace
 a deaktivovaným tlačítkem pro okamžitou syncrhonizaci
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Případ užití - Manuální spuštění synchronizace dat
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Analýza datových modelů
\end_layout

\begin_layout Standard
Následující kapitola se zabývá částí datových modelů v obou systémech, která
 je relevantní pro požadavky z předchozí kapitoly.
 Pro splnění požadavků na přenos objednávek, faktur a dobropisů je potřeba
 identifikovat a případně doplnit datové modely v obou systémech.
 Dále je potřeba navrhnout a zvolit vhodný způsob pro ukládání nastavení
 aplikace a mapování datových modelů.
\end_layout

\begin_layout Subsection
Datový model Salesforce CRM
\end_layout

\begin_layout Standard
Salesforce ve standardním datovém modelu obsahuje entity pro Objednávku
 a Produkty, jež jsou ve vztahu M:N propojené přes mezilehlou tabulku Order
 Product (API název OrderItem).
 Faktury a dobropisy nejsou ve standardním datovém modelu pro základní licence
 obsaženy.
 Tyto entity jsou zpřístupněny pouze pokud má organizace zakoupenou licenci
 
\begin_inset Quotes gld
\end_inset

Salesforce Order Management
\begin_inset Quotes grd
\end_inset

, pro splnění nefunkčního požadavku NF7 bude proto potřeba pro tyto objekty
 vytvořit kustomizovanou část datového modelu.
\end_layout

\begin_layout Subsection
Datový model ABRA Flexibee
\end_layout

\begin_layout Standard
ABRA nabízí na jednom serveru spravovat více firem, pro integraci je tedy
 nutné specifikovat pro jakou firmu má integrace fungovat.
\end_layout

\begin_layout Subsubsection
Datové schéma entit
\end_layout

\begin_layout Standard
ABRA Flexi umožňuje v rámci REST API načtení datového modelu jednotlivých
 entit ve formátu XSD.
 Schémata jsou rozdělena na verze pro export a import dat a je možné je
 získat pomocí webové služby na adrese 
\begin_inset listings
lstparams "numbers=left,showstringspaces=false,columns=fullflexible"
inline true
status open

\begin_layout Plain Layout

/c/<identifikátor firmy>/<evidence>/<typ schématu.xsd>
\end_layout

\end_inset

 (ABRA, Dokumentace XML Schéma)
\end_layout

\begin_layout Standard
konkrétní relativní adresa pak může vypadat například takto:
\begin_inset listings
lstparams "columns=fullflexible"
inline false
status open

\begin_layout Plain Layout

/c/demo/faktura-vydana/schema-import.xsd
\end_layout

\end_inset


\end_layout

\begin_layout Standard
XML Schema Definition (XSD) popisuje strukturu XML dokumentu nebo jeho JSON
 varianty, definuje podporované elementy, atributy a datové typy s povolenými
 hodnotami.
 (W3Schools, XML Schema Tutorial)
\end_layout

\begin_layout Standard
Pomocí nich bude možné docílit interaktivního mapování atributů v aplikaci.
\end_layout

\begin_layout Subsubsection
Objednávky a faktury
\end_layout

\begin_layout Standard
Datový model ABRA Flexi má již připravené entity pro objednávky, faktury
 a dobropisy.
 Entity pro přijaté a vydané faktury jsou různé, stejně tak pro přijaté
 a vydané objednávky.
 
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
ABRA Flexi API názvy entit pro objednávky a faktury
\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
API název
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Přijatá objednávka
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
objednavka-prijata
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Vydaná faktura
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
faktura-vydana
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Vydaná objednávka
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
objednavka-vydana
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Přijatá faktura
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
faktura-prijata
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Ukládání mapování a parametrizace
\end_layout

\begin_layout Standard
V případě mapování a parametrů aplikace se z pohledu systému nejedná o data
 ale o metadata z toho důvodu není vhodné je ukládat do datových struktur,
 kterými jsou SObjecty.
 Salesforce pro tento případ nabízí dva různé způsoby Custom Metadata (Salesforc
e, Docs What are Custom Metadata Types?) a Custom Settings (Salesforce,
 Docs Custom Settings).
\end_layout

\begin_layout Standard
Custom Metadata jsou kustomizovatelné entity, jejichž obsah je nasaditelný
 spoelečně se samotnou aplikací.
 Jsou vhodné pro uchovávání mapování, whitelist seznamů a master dat jako
 jsou například hodnoty daňových sazeb.
 (Salesforce, Docs What are Custom Metadata Types?)
\end_layout

\begin_layout Standard
Custom Settings jsou kustomizovatelné entity jejichž obsah je nutné po vytvoření
 vyplnit uživatelem nebo automatizovaným procesem.
 Používají se pro hodnoty, které mění chování systémů a aplikací (parametrizace)
 a ve vyjímečných případech pro uchování přístupových udajů pro integraci
 s externím systémem.
 Custom settings také umožňují vytvoření záznamu, který je specifický pro
 konkrétního uživatele nebo skupinu uživatelů.
 (Salesforce, Docs Custom Settings)
\end_layout

\begin_layout Subsubsection
Struktura pro mapování dat mezi systémy
\end_layout

\begin_layout Standard
Pro mapování yly na základě dokumentace využity Custom Metadata Types.
 Byly vytvořeny metadata s názvem 
\series bold
ABRA Flexi Data Mappings 
\series default
s atributy popsanými v následující tabulce.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Specifikace ABRA Flexi Data Mappings metada atributů
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
API název
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Datový typ
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Popis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SFSC SObject Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SFSC_SObject_Name__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Text(100)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Specifikuje název SObjectu v Salesforce kterého se záznam mapování týká.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ABRA Flexi Entity Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ABRA_Flexi_Entity_Name__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Text(100)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Specifikuje název entity v ABRA Flexi kterého se záznam mapování týká.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SFSC Field Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SFSC_Field_Name__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Text(100)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název atributu SObjectu v Salesforce.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ABRA Flexi Field Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ABRA_Flexi_Field_Name__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Text(100)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název atributu v ABRA Flexi
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SFSC To ABRA Flexi Sync
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SFSC_To_ABRA_Flexi_Sync__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Boolean
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Udává, jestli je přenos dat pro tento atribut aktivní pro směr ze Salesforce
 do ABRA Flexi.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ABRA Flexi To SFSC Sync
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ABRA_Flexi_To_SFSC_Sync__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Boolean
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Udává, jestli je přenos dat pro tento atribut aktivní pro směr z ABRA Flexi
 do Salesforce .
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Struktura pro ukládání parametrizace
\end_layout

\begin_layout Standard
Pro ukládání nastavení aplikace byly na základě dokumentace zvoleny hiearchické
 custom settings s názvem 
\series bold
ABRA Flexi Data Integration Settings
\series default
 s atributy popsanými v následující tabulce.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Specifikace ABRA Flexi Data Integration Settings custom settings atributů
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
API název
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Datový typ
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Popis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Order Data Integration Is Active
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Order_Data_Integration_Is_Active__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Boolean
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Udává jestli je integrace objednávek zapnuta.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Invoice Data Integration Is Active
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Invoice_Data_Integration_Is_Active__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Boolean
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Udavá jestli je integrace faktur zapnuta.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integration Interval In Minutes
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integration_Interval_In_Minutes__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Number(5, 0)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Specifikuje interval v minutách po kterém je synchronizace spouštěna.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Records In One Batch
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Records_In_One_Batch__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Number(3, 0)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Specifikuje počet záznamů synchronizavoných v jedné transakci, maximální
 počet je 200.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Company Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Company_Name__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Text(255)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Specifikuje API název firmy v ABRA Flexi, pro kterou se data mají synchronizovat.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Propojení datových modelů a kustomizace
\end_layout

\begin_layout Subsubsection
Externí identifikátor a příznak pro export
\end_layout

\begin_layout Standard
Pro možnost aktualizace záznamu v systému ABRA Flexi je potřeba poskytnout
 jeho Id.
 Toto Id je evidováno na každém podporovaném SObjectu pro export v atributu
 ABRA_Flexi_Id__c a je vedeno jako Id z externího systému.
 Musí být unikátní a rozlišuje velká a malá písmena.
\end_layout

\begin_layout Standard
Dále je potřeba na záznamu evidovat informaci o tom, jestli byl již exportován,
 nebo ne.
 K tomuto účelu byl vytvořen na každém podporovaném SObjectu pro export
 atribut ABRA_Flexi_Data_Exported__c, datového typu boolean, který se po
 úspešném exportu nastaví na hodnotu 
\begin_inset Quotes gld
\end_inset

true
\begin_inset Quotes grd
\end_inset

 a při změně relevantních dat na záznamu na 
\begin_inset Quotes gld
\end_inset

false
\begin_inset Quotes grd
\end_inset

.
\end_layout

\begin_layout Subsubsection
Faktury
\end_layout

\begin_layout Standard
Pro entity přijatých a vydaných faktur byl vytvořen jeden SObject Invoice
 (API název Invoice__c) z toho důvodu že mají společné datové atributy.
 Rozlišení mezi fakturou.
 Vztah k objednávce je 1:N (faktura je navázaná na jednu objednávku, jedna
 objednávka může mít více faktur).
 Vztah k produktu je M:N a je řešen pomocí mezilehlé tabulky Invoice Item
 (API název Invoice_Item__c) tento SObject odpovídá entitam faktura-vydana-poloz
ka a faktura-prijata-polozka.
\end_layout

\begin_layout Standard
Na objektu Account, který reprezentuje zákazníka nebo dodavatele musely
 být vytvořeny atributy pro IČO - Identification_Number__c a DIČ - VAT_Id__c.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Specifikace atributů Invoice SObjectu
\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
API název
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Datový typ
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Popis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Specifikace atributů Invoice Item SObjectu
\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
API název
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Datový typ
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Popis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Mapování entit
\end_layout

\begin_layout Standard
V následujícíh tabulkách je přehled mapování základních atributů pro faktury.
 Toto mapování lze měnit nebo rozšířit.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Mapování Invoice na faktura_vydana a faktura_prijata
\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="19" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SFSC API název
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ABRA Flexi API název
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Popis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ABRA_Flexi_Id__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
id
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Id v systému ABRA Flexi
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Code__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
kod
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
kód faktury
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Type__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
typDokl
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
typ dokladu
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Reference_Order__r.OrderReferenceNumber
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
cisObj
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
číslo objednávky
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Due_Date__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
datSplat
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
datum splatnosti
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Issue_Date__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
datVyst
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
datum vystavení
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Description__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
popis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
popis
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Total_Amount_With_Tax__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
sumCelkemMen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Celková suma včetně DPH v měně dokladu.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Total_Amount__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
sumCelkZaklMen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Celková suma všech základů v základní sazbě DPH.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Total_Tax_Amount__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
sumDphZaklMen
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Celková částka DPH v základní sazbě DPH v měně dokladu.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Billing_Account__r.Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nazFirmy
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Název firmy nebo jméno osoby
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Reference_Order__r.BillingAddress.Street
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ulice
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ulice
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Reference_Order__r.BillingAddress.City
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
mesto
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Město
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Reference_Order__r.BillingAddress.PostalCode
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
psc
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
PSČ
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Billing_Account__r.Identification_Number__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
IČO
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Billing_Account__r.VAT_Id__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
DIČ
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Date_of_Taxable_Supply__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
duzpPuv
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Datum uskutečnění zdanitelného plnění
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Status__c
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
stavUhrK
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Stav úhrady dokladu
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Výsledný datový model Salesforce CRM
\end_layout

\begin_layout Section
Uživatelské skupiny a práva
\end_layout

\begin_layout Standard
Je potřeba zajistit jednoduché přiřazování skupin oprávnění k odlišení administr
átorských a standardních uživatelů pro práci s aplikací a daty a systémového
 uživatele, pod kterým poběží automatická synchronizace dat.
 
\end_layout

\begin_layout Standard
Salesforce nabízí dva základní způsoby správy oprávnění - přes Profile (Salesfor
ce, Docs Profiles) a Permission Set (Salesforce, Docs Permission Sets).
 Permission sety mohou být přímo přiřazeny uživateli nebo shlukovány do
 Permission Set Groups (Salesforce, Docs Permission Set Groups), která je
 pak přiřazena uživateli.
 Zatímco profil může mít uživatel pouze jeden, permission setů a permission
 set group může mít přiřazeno více.
 Dále je možné profilům a permission setům přiřadit Custom Permission (Salesforc
e, Docs Custom Permissions), kterou lze využít v logice aplikací a chová
 se jako jednoduchý Boolean - má / nemá.
\end_layout

\begin_layout Standard
Z důvodu přehlednosti, škálovatelnosti a oddělení aplikace od konkrétní
 organizace Salesforce, do které bude nainstalována a aby nebylo potřeba
 zasahovat do stávajících profilů jsem se rozhodl využít kombinaci permission
 setů, custom permission a permission set group.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
Následující tabulka zobrazuje obsah Permission Set Group pro standardního
 uživatele a společné skupiny pro Administrátora a systémováho uživatele.
\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="20page%">
<column alignment="center" valignment="top" width="25page%">
<column alignment="center" valignment="top" width="25page%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Oblast oprávnění
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Standardní uživatel
\end_layout

\begin_layout Plain Layout
(ABRA Flexi Integration Standard)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Administrátor aplikace a systémový uživatel
\end_layout

\begin_layout Plain Layout
(ABRA Flexi Integration Admin)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Objednávky
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Order Standard Permission Set
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Order Admin Permission Set
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Produkty
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Product Standard Permission Set
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Product Admin Permission Set
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Faktury a dobropisy
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Invoice Standard Permission Set
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Invoice Admin Permission Set
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Právo na administrátorský přístup do aplikace
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
——
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ABRA Flexi App Admin (Custom Permission)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Právo na 
\series bold
ABRA Flexi Data Mappings
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
True
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Přehled oprávnění podle skupin uživatelů
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Datová integrace
\end_layout

\begin_layout Standard
Následující kapitola popisuje jakým způsobem a za pomocí jakých technologií
 byl implementován export dat ze SFSC do ABRA Flexi.
 
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Subsection
Diagram tříd
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/tomaschour/Downloads/Class Diagram (1).png
	height 80pheight%
	rotateAngle 90

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
UML diagram tříd logiky datové integrace
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Subsection
Automatizace
\end_layout

\begin_layout Standard
O automatické naplánování dalšího exportu se stará třída AbraDataExportScheduler
, která implementuje rozhraní Schedulable.
 Po prvním spuštění AbraDataExportScheduler, které je nutné provést ručně
 nebo za pomoci post-install scriptu po nasazení kódu, se další průběhy
 plánují automaticky podle hodnoty zadané v ABRA Flexi Data Integration
 Settings - Integration Interval In Minutes.
 (viz Výpis1)
\end_layout

\begin_layout Standard
Schedulable rozhraní umožňuje vykonat logiku kódu za nějaký určitý čas a
 nebo tuto logiku opakovat pravidelně v určitém intervalu.
 Čas průběhu se plánuje pomocí cron nástroje.
 (Salesforce, Docs Apex Scheduler)
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "language=Java,numbers=left,showstringspaces=false,caption={Plánování dalšího exportu dat},emph={subject,predicate,object},emphstyle={\color{blue}},frame=box,keywordstyle={\color{violet}},columns=fullflexible"
inline false
status open

\begin_layout Plain Layout

/**
\end_layout

\begin_layout Plain Layout

     * @description executes sync batches for each object defined in
\end_layout

\begin_layout Plain Layout

     * batchRunsConfigurations and schedules next run
\end_layout

\begin_layout Plain Layout

     *
\end_layout

\begin_layout Plain Layout

     * @param ctx SchedulableContext
\end_layout

\begin_layout Plain Layout

     * @author tomaschour
\end_layout

\begin_layout Plain Layout

     * @date 2021-04-25
\end_layout

\begin_layout Plain Layout

     */
\end_layout

\begin_layout Plain Layout

    public void execute(SchedulableContext ctx) {
\end_layout

\begin_layout Plain Layout

        // run batch export for every supported object
\end_layout

\begin_layout Plain Layout

        executeBatchForEveryObject();
\end_layout

\begin_layout Plain Layout

        // Delete old scheduled jobs
\end_layout

\begin_layout Plain Layout

        clearOldScheduledApexJobs();
\end_layout

\begin_layout Plain Layout

        // schedule next run
\end_layout

\begin_layout Plain Layout

        scheduleNext();
\end_layout

\begin_layout Plain Layout

        // TODO commit logs
\end_layout

\begin_layout Plain Layout

    }
\end_layout

\begin_layout Plain Layout

/**
\end_layout

\begin_layout Plain Layout

     * @description Schedules next run of SfccSObjectSyncScheduler
\end_layout

\begin_layout Plain Layout

     *
\end_layout

\begin_layout Plain Layout

     * @author tomaschour
\end_layout

\begin_layout Plain Layout

     * @date 2021-04-25
\end_layout

\begin_layout Plain Layout

     */
\end_layout

\begin_layout Plain Layout

    private void scheduleNext() {
\end_layout

\begin_layout Plain Layout

        Integer scheduleInterval =
\end_layout

\begin_layout Plain Layout

        ((Decimal) AbraFlexiDataIntegrationSettings.getAttributeValue(
\end_layout

\begin_layout Plain Layout

        ABRA_Flexi_Data_Integration_Settings__c
\end_layout

\begin_layout Plain Layout

		.Integration_Interval_In_Minutes__c
\end_layout

\begin_layout Plain Layout

        )).intValue();
\end_layout

\begin_layout Plain Layout

        Datetime nextTime = System.now();
\end_layout

\begin_layout Plain Layout

        nextTime = nextTime.addMinutes(scheduleInterval);
\end_layout

\begin_layout Plain Layout

        String strJobName = JOB_NAME + System.now().getTime();
\end_layout

\begin_layout Plain Layout

        String strSchedule = nextTime.format('0 m H d MM ? yyyy');
\end_layout

\begin_layout Plain Layout

        System.schedule(strJobName,
\end_layout

\begin_layout Plain Layout

		strSchedule,
\end_layout

\begin_layout Plain Layout

		new AbraDataExportScheduler());
\end_layout

\begin_layout Plain Layout

    }
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Asynchronní hromadný export
\end_layout

\begin_layout Standard
Jelikož může docházet k tomu, že v rámci jednoho běhu exportu bude potřeba
 odeslat velké množství záznamů, je potřeba toto množství dávkovat, aby
 nedocházelo k přetečení limitů.
 Tohoto dávkování je v Salesforce možné docílit pomocí implementace interface
 Database.Batchable.
 Třída poté zpracovává záznamy po dávkách, jejichž velikost se specifikuje
 při spuštění dané třídy.
 (Salesforce, Docs Using Batch Apex) Batch se skládá ze třech hlavních metod
 - start , execute a finish.
 (viz Výpis2)
\begin_inset listings
lstparams "numbers=left,showstringspaces=false,caption={Ukázka batch třídy},emph={subject,predicate,object},emphstyle={\color{blue}},frame=box,keywordstyle={\color{violet}},columns=fullflexible"
inline false
status open

\begin_layout Plain Layout

public class BatchClass implements Database.Batchable<SObject>{
\end_layout

\begin_layout Plain Layout

 
\end_layout

\begin_layout Plain Layout

    public Database.QueryLocator start(Database.BatchableContext BC){
\end_layout

\begin_layout Plain Layout

       // načte záznamy ke zpracování
\end_layout

\begin_layout Plain Layout

    }
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

    public void execute(Database.BatchableContext BC, List<SObject> scope){
\end_layout

\begin_layout Plain Layout

        // zpracuje záznamy
\end_layout

\begin_layout Plain Layout

    }
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

    public void finish(Database.BatchableContext BC) {
\end_layout

\begin_layout Plain Layout

        // logika po tom, co doběhnou všechny dávky, např.
 log
\end_layout

\begin_layout Plain Layout

    }
\end_layout

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Nejdříve batch skrze metodu start načte všechny záznamy ke zpracování a
 vrací je ve fromě Iterable třídy nebo Database.QueryLocator.
 Následuje několik průběhů metody execute, počet průběhů lze dopočítat vzorcem
 
\begin_inset Formula $celkovýPočetZáznamůKeZpracování/velikostDávky$
\end_inset

 se zaokrouhlením na celá čísla směrem nahoru.
 Jednotlivé průběhy běží asynchronně v samostatných transakcích.
 Po zpracování všech dávek se zavolá metoda finish.
 Pokud chceme v rámci batch třídy prováděd volání ven ze systému, je potřeba
 implementovat rozhraní Database.AllowsCallouts.
 (Salesforce, Docs Using Batch Apex)
\end_layout

\begin_layout Standard
Třída AbraSobjectExportBatch po dávkách exportuje objekty stejného typu.
 Jaké objekty se mají exportovat se parametrizuje skrze proměnnou typu ExportBat
chRunConfiguration, což je třída, která má atributy pro:
\end_layout

\begin_layout Itemize
API název SObjectu v SFSC - např.
 Order nebo Invoice__c
\end_layout

\begin_layout Itemize
API název entity v ABRA Flexi - např.
 faktura-vydana
\end_layout

\begin_layout Itemize
Název SFSC pole na objektu, který udává, zda již byl záznam exportován -
 podle něho se filtrují záznamy ve start metodě
\end_layout

\begin_layout Itemize
Dodatečné podmínky pro filtraci záznamů ke zpracování - např.
 pokud je potřeba rozlišit mezi vydanými a přijatými fakturami - nepovinný
 atribut
\end_layout

\begin_layout Standard
V execute metodě se poté volá implementace AbraSynchronizationInterface
 rozhraní pro konkrétní SObject, ve které dochází k odeslání dat a zpracování
 odpovědi - uložení vygenerovaného ABRA Flexi Id na záznamy a označení jako
 synchronizovaných v případě úspěšného vytvoření.
 Pokud ve kterékoliv fázi exportu dojde k vyjímce, je tato vyjímka zalogována.
\end_layout

\begin_layout Subsection
Struktura přenášených dat
\end_layout

\begin_layout Standard
Tělo HTTP dotazu, které obsahuje data pro upsert (insert nebo update) je
 ve fromátu JSON.
 Celý objekt má kořenový atribut 
\begin_inset Quotes gld
\end_inset

winstrom
\begin_inset Quotes grd
\end_inset

, který obsahuje vnořený objekt s atributem api názvu entity, jenž obsahuje
 list záznamů pro upsert.
 (viz Výpis3)
\begin_inset listings
lstparams "numbers=left,showstringspaces=false,caption={JSON pro import dat do ABRA Flexi},emph={subject,predicate,object},emphstyle={\color{blue}},frame=box,keywordstyle={\color{violet}},columns=fullflexible"
inline false
status open

\begin_layout Plain Layout

{
\end_layout

\begin_layout Plain Layout

    "winstrom": {
\end_layout

\begin_layout Plain Layout

        "faktura-vydana": [
\end_layout

\begin_layout Plain Layout

            {       
\end_layout

\begin_layout Plain Layout

                "kod":"KOD_FAKTURY001",
\end_layout

\begin_layout Plain Layout

                "typDokl":68,
\end_layout

\begin_layout Plain Layout

                "popis": "popis dokladu Salesforce updated 5"
\end_layout

\begin_layout Plain Layout

            },
\end_layout

\begin_layout Plain Layout

            {
\end_layout

\begin_layout Plain Layout

                "id": "4228",
\end_layout

\begin_layout Plain Layout

                "popis": "popis dokladu Salesforce updated 8"
\end_layout

\begin_layout Plain Layout

            }
\end_layout

\begin_layout Plain Layout

        ]
\end_layout

\begin_layout Plain Layout

    }
\end_layout

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Odpověď poté obsahuje ve stejném kořenovém atributu informaci o úspěšnosti
 zpracování, sumarizaci provedených operací - počeet vytvořených, aktualizovánýc
h, vymázáných, vynecháných záznamů a kolik záznamů skončilo neuspěchem a
 následně atribut s detailem výsledků (viz Výpis4)
\begin_inset listings
lstparams "numbers=left,showstringspaces=false,caption={JSON odpověď z ABRA Flexi},emph={subject,predicate,object},emphstyle={\color{blue}},frame=box,keywordstyle={\color{violet}},columns=fullflexible"
inline false
status open

\begin_layout Plain Layout

{
\end_layout

\begin_layout Plain Layout

    "winstrom": {
\end_layout

\begin_layout Plain Layout

        "@version": "1.0",
\end_layout

\begin_layout Plain Layout

        "success": "true",
\end_layout

\begin_layout Plain Layout

        "stats": {
\end_layout

\begin_layout Plain Layout

            "created": "1",
\end_layout

\begin_layout Plain Layout

            "updated": "1",
\end_layout

\begin_layout Plain Layout

            "deleted": "0",
\end_layout

\begin_layout Plain Layout

            "skipped": "0",
\end_layout

\begin_layout Plain Layout

            "failed": "0"
\end_layout

\begin_layout Plain Layout

        },
\end_layout

\begin_layout Plain Layout

        "results": [
\end_layout

\begin_layout Plain Layout

            {
\end_layout

\begin_layout Plain Layout

                "id": "4239",
\end_layout

\begin_layout Plain Layout

                "ref": "/c/demo/faktura-vydana/4239"
\end_layout

\begin_layout Plain Layout

            },
\end_layout

\begin_layout Plain Layout

            {
\end_layout

\begin_layout Plain Layout

                "id": "4228",
\end_layout

\begin_layout Plain Layout

                "request-id": "4228",
\end_layout

\begin_layout Plain Layout

                "ref": "/c/demo/faktura-vydana/4228"
\end_layout

\begin_layout Plain Layout

            }
\end_layout

\begin_layout Plain Layout

        ]
\end_layout

\begin_layout Plain Layout

    }
\end_layout

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Autentizace
\end_layout

\begin_layout Standard
Pro autorizaci do externích systémů poskytuje Salesforce doporučuje využití
 Named Credentials.
 Named Credentials umožňují specifikovat url adresu pro HTTP dotazy a parametry
 autentizace v jednom.
 Výhoda tohoto je, že nemusíme přístupové údaje ukládat někam mimo a nebo
 při nejhorším je držet v kódu.
 Salesforce také tyto přistupové údaje šifruje.
 (Salesforce, Docs Named Credentials)
\end_layout

\begin_layout Standard
Pro autentizaci dotazů do ABRA Flexi byly vytvořeny ABRA_Flexi Named Credentials
 odkazující na url cloudové demo instance, na které byla tato práce vyvíjena:
 
\begin_inset CommandInset href
LatexCommand href
target "https://demo.flexibee.eu"

\end_inset

.
 Byla zvolena basic autentizace pomocí přihlašovacího jména a hesla, které
 ABRA pro demo poskytuje.
 Uživatel, který je používán pro integraci dat by měl mít v ABRA Flexi systému
 dostatečná oprávnění na úpravu a zakládání všech podporovaných entit a
 na čtení jejich XSD schématu.
\end_layout

\begin_layout Standard
Do ABRA Flexi je možné se mimo jednoduchou HTTP autentizaci autentizovat
 pomocí JSON autentizace, SAMLv2 a OpenId.
 Bohužel poslední dvě zmiňované jsou podporovány pouze na lokální stanici.
 (ABRA, Dokumentace Autentizace)
\end_layout

\begin_layout Standard
Named Credentials také nabízí možnost autentizace pomocí OpenId a jde z
 hlediska bezpečnosti o preferovanou variantu před základní HTTP autentizací.
 Pokud je to tedy možné, je vhodné použít OpenId.
\end_layout

\begin_layout Subsection
Rozšíření o podporu dalších entit 
\end_layout

\begin_layout Standard
Pro rozšíření logiky o export dalších entit je nutné pro tyto entity, pokud
 již neexistuje, vytvořit třídu s názvoslovím Abra<API název SFSC SObjectu
 bez '_' a '__c'>DataSyncService, která implementuje rozhraní AbraSynchronizatio
nInterface.
 V této vytvořené třídě je pak implementována metoda exportRecords, která
 obsahuje logiku pro přípravu dat, volání export HTPP dotazu, a zpracování
 výsledku.
 (viz Výpis5)
\end_layout

\begin_layout Standard
Dále je potřeba pro danou entitu přidat instanci konfigurace batche do AbraDataE
xportScheduler.batchRunsConfigurations.
 (viz Výpis6) TODO
\end_layout

\begin_layout Standard
Daná entita musí mít alespoň jeden odpovídající záznam v ABRA Flexi Data
 Mappings, pokud takový záznam neexistuje, asyncrhonní process pro danou
 entitu skončí výjimkou.
\end_layout

\begin_layout Section
Uživatelská aplikace
\end_layout

\begin_layout Section
Testování
\end_layout

\begin_layout Subsection
Jednotkové testy
\end_layout

\begin_layout Subsection
Uživatelské testy
\end_layout

\begin_layout Section
Distribuce
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
section*{Seznam použité literatury} 
\backslash
label{sec:literatura} 
\backslash
addcontentsline{toc}{section}{
\backslash
nameref{sec:literatura}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
MARTIN, C.
 Robert, 2018.
 Clean architecture: a craftsman's guide to software structure and design.
 London, England: Prentice Hall.
 ISBN 978-0134494166.
\end_layout

\begin_layout Standard
BRUCKNER, Tomáš, VOŘÍŠEK, Jiří, BUCHALCEVOVÁ, Alena, STANOVSKÁ, Iva, CHLAPEK,
 Dušan, ŘEPA, Václav, 2012.
 Tvorba informačních systémů: principy, metodiky, architektury.
 Praha: Grada.
 Management v informační společnosti.
 ISBN 978-80-247-4153-6.
\end_layout

\begin_layout Standard
KOELSCH, George, 2016.
 Requirements Writing for System Engineering.
 Apress, Berkeley, CA.
 ISBN 978-1-4842-2098-6.
\end_layout

\begin_layout Standard
KRATOCHVÍL, Ondřej, 2019.
 Continuous Delivery on the Salesforce Platform.
 Praha.
 Bachelor’s thesis.
 Czech Technical University in Prague, Faculty of Electrical Engineering.
 Vedoucí práce ŠEBEK Jiří.
\end_layout

\begin_layout Standard
ABRA, nedatováno.
 Dokumentace REST API: Dokumentace a referenční příručka FlexiBee REST API
 [online].
 [cit.
 2021-03-09].
 Dostupné z: https://intercom.help/podpora-flexi/cs/collections/2592813-dokumenta
ce-rest-api
\end_layout

\begin_layout Standard
ABRA [online]: Dokumentace XML Schéma.
 [cit.
 2021-04-21].
 Dostupné z https://www.flexibee.eu/api/dokumentace/ref/xsd
\end_layout

\begin_layout Standard
ABRA [online]: Dokumentace Autentizace.
 [cit.
 2021-04-21].
 Dostupné z: https://www.flexibee.eu/api/dokumentace/ref/login/
\end_layout

\begin_layout Standard
VARSHA, Mouli Ravichandra a K.
 P.
 JEVITHA, 2016.
 Web Services Attacks and Security- A Systematic Literature Review [online].
 [cit.
 2021-03-11].
 Dostupné z: doi:10.1016/j.procs.2016.07.265
\end_layout

\begin_layout Standard
IACONO, Luigi Lo a Peter Leo GORSKI, 2019.
 On the Need for a General REST-Security Framework.
 Future Internet [online].
 [cit.
 2021-03-11].
 Dostupné z: doi:10.3390/fi11030056
\end_layout

\begin_layout Standard
SALESFORCE, nedatováno.
 Salesforce Developer Documentation [online].
 [cit.
 2021-03-12].
 Dostupné z: https://developer.salesforce.com/docs
\end_layout

\begin_layout Standard
SALESFORCE [online]: Docs Profiles.
 [cit.
 2021-04-20].
 Dostupné z: https://developer.salesforce.com/docs/atlas.en-us.securityImplGuide.meta
/securityImplGuide/admin_userprofiles.htm
\end_layout

\begin_layout Standard
SALESFORCE [online]: Docs Permission Sets.
 [cit.
 2021-04-20].
 Dostupné z: https://developer.salesforce.com/docs/atlas.en-us.securityImplGuide.meta
/securityImplGuide/perm_sets_overview.htm
\end_layout

\begin_layout Standard
SALESFORCE [online]: Docs Custom Permissions.
 [cit.
 2021-04-20].
 Dostupné z: https://developer.salesforce.com/docs/atlas.en-us.securityImplGuide.meta
/securityImplGuide/custom_perms_overview.htm
\end_layout

\begin_layout Standard
SALESFORCE [online]: Docs Permission Set Groups.
 [cit.
 2021-04-20].
 Dostupné z: https://help.salesforce.com/articleView?id=sf.perm_set_groups.htm
\end_layout

\begin_layout Standard
SALESFORCE [online]: Docs Custom Settings.
 [cit.
 2021-04-20].
 Dostupné z: https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode
/apex_customsettings.htm
\end_layout

\begin_layout Standard
SALESFORCE [online]: Docs What are Custom Metadata Types? [cit.
 2021-04-20].
 Dostupné z: https://help.salesforce.com/articleView?id=sf.custommetadatatypes_abou
t.htm
\end_layout

\begin_layout Standard
SALESFORCE [online]: Docs Apex Scheduler [cit.
 2021-04-20].
 Dostupné z: https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode
/apex_scheduler.htm
\end_layout

\begin_layout Standard
SALESFORCE [online]: Docs Using Batch Apex [cit.
 2021-04-20].
 Dostupné z: https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode
/apex_batch_interface.htm
\end_layout

\begin_layout Standard
SALESFORCE [online]: Docs Named Credentials [cit.
 2021-04-20].
 Dostupné z: https://help.salesforce.com/articleView?id=sf.named_credentials_about.h
tm
\end_layout

\begin_layout Standard
SALESFORCE.
 Execution Governors and Limits [online].
 [cit.
 2021-04-09].
 Dostupné z: https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode
/apex_gov_limits.htm
\end_layout

\begin_layout Standard
GARTNER, 2019.
 Market Share: Customer Experience and Relationship Management, Worldwide,
 2018 [online].
 Dostupné z: https://www.gartner.com/en/documents/3984886/market-share-customer-ex
perience-and-relationship-manage
\end_layout

\begin_layout Standard
Anon, nedatováno.
 Salesforce Lightning Design System [online].
 [cit.
 2021-03-12].
 Dostupné z: https://www.lightningdesignsystem.com/
\end_layout

\begin_layout Standard
ČSÚ, 2016 [Český statistický úřad].
 Firmy využívající cloudové CRM aplikace pro správu a využití informací
 o zákaznících [tabulka].
 22.12.2016.
 Dostupné z: https://www.czso.cz/documents/10180/32961948/06200516_104.pdf
\end_layout

\begin_layout Standard
ČSÚ, 2019 [Český statistický úřad].
 Firmy využívající cloudové CRM aplikace pro správu a využití informací
 o zákaznících, [tabulka].
 11.01.2019.
 Dostupné z: https://www.czso.cz/documents/10180/61601888/0620051843.pdf
\end_layout

\begin_layout Standard
ČSÚ, 2021 [Český statistický úřad].
 Firmy využívající cloudové CRM aplikace pro správu a využití informací
 o zákaznících [tabulka].
 07.01.2021 .
 Dostupné z: https://www.czso.cz/documents/10180/122362688/06200520077.pdf
\end_layout

\begin_layout Standard
VONFANGE, M.
 a LAVIGNE, D, 2011.
 IT cost optimization through open source software.
 The Open Source Business Resource, , 5-10.
 Dostupné z: https://search-proquest-com.zdroje.vse.cz/scholarly-journals/cost-opti
mization-through-open-source-software/docview/1695043191/se-2
\end_layout

\begin_layout Standard
SALESFORCE EMEA, nedatováno.
 Customer 360 [online].
 [cit.
 2021-03-20].
 Dostupné z: https://www.salesforce.com/products/
\end_layout

\begin_layout Standard
LIU, David.
 Clicks versus Code! [online].
 2018 [cit.
 2021-04-09].
 Dostupné z: https://www.sfdc99.com/2018/01/22/workflow-process-builder-flow-apex/
\end_layout

\begin_layout Standard
ABRA FLEXI S.R.O.
 ABRA Flexi [online].
 [cit.
 2021-04-09].
 Dostupné z: https://www.flexibee.eu/
\end_layout

\begin_layout Standard
SYSTEM ONLINE.
 ABRA FLEXIBEE [online].
 [cit.
 2021-04-09].
 Dostupné z: https://www.systemonline.cz/prehled-informacnich-systemu/ekonomicke-s
ystemy/abra-flexibee-1.htm
\end_layout

\begin_layout Standard
GUAY, Matthew.
 What are webhooks? [online].
 2020 [cit.
 2021-04-09].
 Dostupné z: https://zapier.com/blog/what-are-webhooks/
\end_layout

\begin_layout Standard
FOOTE, Keith D.
 The Fundamentals of Data Integration [online].
 2019 [cit.
 2021-04-09].
 Dostupné z: https://www.dataversity.net/the-fundamentals-of-data-integration/
\end_layout

\begin_layout Standard
HOHPE, Gregor.
 Conversation Patterns [online].
 2017 [cit.
 2021-04-09].
 Dostupné z: https://www.enterpriseintegrationpatterns.com/patterns/conversation/i
ndex.html
\end_layout

\begin_layout Standard
W3SCHOOLS.
 XML Schema Tutorial [online].
 [cit.
 2021-4-21].
 Dostupné z: https://www.w3schools.com/xml/schema_intro.asp
\end_layout

\end_body
\end_document
